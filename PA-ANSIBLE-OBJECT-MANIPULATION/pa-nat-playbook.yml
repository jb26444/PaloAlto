---

- name: Palo Alto Playbook
  hosts: palo
  gather_facts: false
  connection: local

  collections:
    - paloaltonetworks.panos

  vars:
    palo_provider:
      ip_address: "{{ ansible_host }}"
      username: 'super_admin'
      password: 'Palo123!'

  tasks:    
    - name: Create object 'Test-One'
      panos_address_object:
        provider: '{{ provider }}'
        name: 'Test-One'
        value: '1.1.1.1'
        description: 'Description One'
        tag: ['Prod']

    - name: Create object 'Test-Two'
      panos_address_object:
        provider: '{{ provider }}'
        name: 'Test-Two'
        address_type: 'ip-range'
        value: '1.1.1.1-2.2.2.2'
        description: 'Description Two'
        tag: ['SI']

    - name: Create object 'Test-Three'
      panos_address_object:
        provider: '{{ provider }}'
        name: 'Test-Three'
        address_type: 'fqdn'
        value: 'foo.bar.baz'
        description: 'Description Three'

    - name: Delete object 'Test-Two'
      panos_address_object:
        provider: '{{ provider }}'
        name: 'Test-Two'
        state: 'absent'